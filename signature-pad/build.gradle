apply plugin: 'com.android.library'
apply plugin: 'maven-publish'
//apply plugin: 'com.jfrog.bintray'
apply from: rootProject.file("github.properties")

Properties properties = new Properties()
final def bintrayPropertiesFile = project.rootProject.file('bintray.properties')
if (bintrayPropertiesFile.exists()) properties.load(bintrayPropertiesFile.newDataInputStream())

android {
    compileSdkVersion Integer.parseInt(project.ANDROID_BUILD_SDK_VERSION)

    defaultConfig {
        minSdkVersion 19
        targetSdkVersion Integer.parseInt(project.ANDROID_BUILD_TARGET_SDK_VERSION)
        consumerProguardFiles 'proguard-rules-consumer.pro'
    }

    dataBinding {
        enabled = true
    }
}

publishing {
    publications {
        maven(MavenPublication) {
            afterEvaluate {
                artifact sourcesJar
                artifact("$buildDir/outputs/aar/signature-pad-debug.aar")
            }
            groupId 'com.prologapp'
            // Replace with the name of your library
            artifactId 'signature-pad'
            version '1.0.0'
        }
    }

    repositories {
        maven {
            name = "SignaturePad"
            // Replace GITHUB_USERID with your personal or organisation user ID and
            // REPOSITORY with the name of the repository on GitHub
            url = uri("https://maven.pkg.github.com/prologapp/android-signaturepad")

            credentials {
                username = "gustavocnp95"
                password = "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"
            }
        }
    }
}

task sourcesJar(type: Jar) {
    archiveClassifier.set('sources')
    from android.sourceSets.main.java.srcDirs
}

task javadoc(type: Javadoc) {
    source = android.sourceSets.main.java.srcDirs
    classpath += project.files(android.getBootClasspath().join(File.pathSeparator))
}

task javadocJar(type: Jar, dependsOn: javadoc) {
    archiveClassifier.set('javadoc')
    from javadoc.destinationDir
}

artifacts {
    archives sourcesJar
}